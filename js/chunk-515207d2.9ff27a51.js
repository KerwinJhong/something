(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-515207d2"],{a708:function(t,a,e){"use strict";e.r(a);var r,i,n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("AdminNavbarTop",{attrs:{"initial-title":t.title}}),t.isLoading?e("Spinner"):e("div",{staticClass:"dash-board"},[e("div",{staticClass:"border-bottom"},[e("router-link",{staticClass:"btn btn-outline-primary ml-2",attrs:{to:{name:"admin-dashboard-pieChart",query:{range:"weekly"}}}},[t._v("前七天")]),e("router-link",{staticClass:"btn btn-outline-primary m-2",attrs:{to:{name:"admin-dashboard-pieChart",query:{range:"monthly"}}}},[t._v("前一個月")]),e("router-link",{staticClass:"btn btn-outline-primary",attrs:{to:{name:"admin-dashboard-lineChart"}}},[t._v("曲線圖")])],1),e("div",{staticClass:"row justify-content-around"},[e("div",{staticClass:"col-4 border border-secondary rounded shadow-lg"},[e("h3",{staticClass:"text-center mt-3"},[t._v("HotProducts")]),e("PieChart",{staticClass:"my-3",attrs:{"initial-data":t.hotProducts}}),e("AdminDashBoardTable",{attrs:{"initial-category":t.hotProducts}})],1),e("div",{staticClass:"col-4 border border-secondary rounded shadow-lg"},[e("h3",{staticClass:"text-center mt-3"},[t._v("HotTags")]),e("PieChart",{staticClass:"my-3",attrs:{"initial-data":t.hotTags}}),e("AdminDashBoardTable",{attrs:{"initial-category":t.hotTags}})],1),e("div",{staticClass:"col-4 border border-secondary rounded shadow-lg"},[e("h3",{staticClass:"text-center mt-3"},[t._v("HotMembers")]),e("PieChart",{staticClass:"my-3",attrs:{"initial-data":t.hotMembers}}),e("AdminDashBoardTable",{attrs:{"initial-category":t.hotMembers}})],1)])]),e("AdminNavbarBottm")],1)},s=[],o=(e("d81d"),e("96cf"),e("1da1")),d=e("a2fe"),h=e("34f8"),c=(e("b0c0"),e("2909")),u=e("1fca"),l={name:"PieChart",props:{initialData:{type:Array,default:function(){return[]}}},computed:{name:function(){return this.initialData.map((function(t){return t.name}))},count:function(){return this.initialData.map((function(t){return t.count}))}},extends:u["b"],mounted:function(){this.gradient=this.$refs.canvas.getContext("2d").createLinearGradient(0,0,0,450),this.gradient2=this.$refs.canvas.getContext("2d").createLinearGradient(0,0,0,450),this.gradient3=this.$refs.canvas.getContext("2d").createLinearGradient(0,0,0,450),this.gradient4=this.$refs.canvas.getContext("2d").createLinearGradient(0,0,0,450),this.gradient5=this.$refs.canvas.getContext("2d").createLinearGradient(0,0,0,450),this.gradient.addColorStop(0,"rgba(255, 0,0, 0.9)"),this.gradient.addColorStop(.5,"rgba(255, 0, 0, 0.45)"),this.gradient.addColorStop(1,"rgba(255, 0, 0, 0)"),this.gradient2.addColorStop(0,"rgba(255, 150, 0, 0.9)"),this.gradient2.addColorStop(.5,"rgba(255, 150, 0, 0.9)"),this.gradient2.addColorStop(1,"rgba(255, 150, 0, 0)"),this.gradient3.addColorStop(0,"rgba(160, 255,100, 0.9)"),this.gradient3.addColorStop(.5,"rgba(160, 255, 100, 0.9)"),this.gradient3.addColorStop(1,"rgba(160, 255, 100, 0)"),this.gradient4.addColorStop(0,"rgba(30, 135, 200, 0.9)"),this.gradient4.addColorStop(.5,"rgba(30, 135, 200, 0.9)"),this.gradient4.addColorStop(1,"rgba(30, 135, 200, 0)"),this.gradient5.addColorStop(0,"rgba(120, 45, 170, 0.9)"),this.gradient5.addColorStop(.5,"rgba(120, 45, 170, 0.45)"),this.gradient5.addColorStop(1,"rgba(120, 45, 170, 0)"),this.renderChart({labels:Object(c["a"])(this.name),datasets:[{backgroundColor:[this.gradient,this.gradient2,this.gradient3,this.gradient4,this.gradient5],data:Object(c["a"])(this.count)}]},{responsive:!0,maintainAspectRatio:!1})}},g=l,b=e("2877"),m=Object(b["a"])(g,r,i,!1,null,null,null),p=m.exports,f=e("bc9c"),C=e("5aa0"),v=e("7189"),w=e("8055"),y=e.n(w),x={name:"AdminDashBoardPieChart",components:{AdminNavbarTop:d["a"],AdminNavbarBottm:h["a"],PieChart:p,AdminDashBoardTable:f["a"],Spinner:C["a"]},data:function(){return{state:{date:""},title:"儀錶板",hotProducts:[],hotTags:[],hotMembers:[],startDay:"",endDay:"",isLoading:!0,socket:y()("https://recusplatform.herokuapp.com/")}},created:function(){this.socket.emit("init");var t=this.$route.query.range,a=void 0===t?"weekly":t;this.fetchDashboard({range:a})},beforeRouteUpdate:function(t,a,e){var r=t.query.range,i=void 0===r?"weekly":r;this.fetchDashboard({range:i}),e()},methods:{fetchDashboard:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(a){var e,r,i,n,s,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,this.isLoading=!0,this.hotProducts=[],this.hotTags=[],this.hotMembers=[],t.next=7,v["a"].getPieChart(a);case 7:if(e=t.sent,r=e.data,i=e.statusText,"OK"===i){t.next=11;break}throw new Error(i);case 11:for(n in r.hotProducts)this.hotProducts.push(r.hotProducts[n]);for(s in r.hotTags)this.hotTags.push(r.hotTags[s]);for(o in r.hotMembers)this.hotMembers.push(r.hotMembers[o]);this.hotProducts.push({name:"其他",count:r.otherProducts}),this.hotTags.push({name:"其他",count:r.otherTags}),this.hotMembers.push({name:"其他",count:r.otherMembers}),this.hotProducts.map((function(t,a){return t.indexId=a+1})),this.hotTags.map((function(t,a){return t.indexId=a+1})),this.hotMembers.map((function(t,a){return t.indexId=a+1})),this.isLoading=!1,t.next=28;break;case 23:t.prev=23,t.t0=t["catch"](0),this.isLoading=!1,this.$swal({icon:"warning",title:"無法取得資料，請稍後再試"}),console.log("error",t.t0);case 28:case"end":return t.stop()}}),t,this,[[0,23]])})));function a(a){return t.apply(this,arguments)}return a}(),fetchss:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(a){var e,r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,v["a"].getLineChart(a);case 3:if(e=t.sent,r=e.data,i=e.statusText,"OK"===i){t.next=7;break}throw new Error(i);case 7:console.log("data",r),t.next=14;break;case 10:t.prev=10,t.t0=t["catch"](0),this.$swal({icon:"warning",title:"無法取得資料，請稍後再試"}),console.log("error",t.t0);case 14:case"end":return t.stop()}}),t,this,[[0,10]])})));function a(a){return t.apply(this,arguments)}return a}()}},k=x,T=(e("d148"),Object(b["a"])(k,n,s,!1,null,"081021e2",null));a["default"]=T.exports},d148:function(t,a,e){"use strict";var r=e("fc61"),i=e.n(r);i.a},fc61:function(t,a,e){}}]);
//# sourceMappingURL=chunk-515207d2.9ff27a51.js.map