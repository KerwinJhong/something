{"version":3,"sources":["webpack:///./src/utils/mixins.js","webpack:///./src/views/admin/AdminProfile.vue?f7c2","webpack:///./src/components/Form/ProfileForm.vue?0867","webpack:///./src/apis/member/tag.js","webpack:///./src/components/Form/ProfileForm.vue?1060","webpack:///src/components/Form/ProfileForm.vue","webpack:///./src/components/Form/ProfileForm.vue?f2ce","webpack:///./src/components/Form/ProfileForm.vue","webpack:///./src/views/admin/AdminProfile.vue?0e1e","webpack:///./src/apis/admin/profile.js","webpack:///src/views/admin/AdminProfile.vue","webpack:///./src/views/admin/AdminProfile.vue?b8b8","webpack:///./src/views/admin/AdminProfile.vue"],"names":["timeFromFilter","filters","timeFrom","datetime","moment","locale","format","fromNowFilter","fromNow","emptyImageFilter","emptyImage","src","search","name","searchParams","URLSearchParams","apiHelper","get","toString","render","_vm","this","_h","$createElement","_c","_self","staticClass","staticStyle","_v","attrs","initialIsProcessing","on","$event","stopPropagation","preventDefault","edit","_s","initialEditing","_f","profile","avatar","directives","rawName","value","expression","handleFileChange","$store","state","currentUser","role","domProps","target","composing","tagName","searchTag","_l","dtag","key","id","addTag","tag","removeTag","_e","class","$v","$error","$set","$touch","phone","email","$pending","$dirty","required","account","$router","back","$invalid","handleSubmit","staticRenderFns","mixins","props","initialProfile","type","Object","default","initialTags","Array","Boolean","data","tags","searchResult","validations","minLength","maxLength","watch","computed","tagsDisplay","has","add","e","created","methods","$emit","files","length","imageURL","result","preferredTags","unshift","filter","component","editing","isLoading","isProcessing","put","formData","components","ProfileForm","saveAccount","savePhone","saveName","saveEmail","saveAvatar","savePreferredTags","LoadProfile"],"mappings":"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","file":"js/chunk-afcb68a4.d90e1ba7.js","sourcesContent":["import moment from 'moment'\r\n\r\nexport const timeFromFilter = {\r\n  filters: {\r\n    timeFrom(datetime) {\r\n      return datetime ? moment(datetime).locale(\"zh-tw\").format('llll') : '-'\r\n    }\r\n  }\r\n}\r\n\r\nexport const fromNowFilter = {\r\n  filters: {\r\n    fromNow(datetime) {\r\n      return datetime ? moment(datetime).fromNow() : '-'\r\n    }\r\n  }\r\n}\r\n\r\nexport const emptyImageFilter = {\r\n  filters: {\r\n    emptyImage(src) {\r\n      return src || 'https://via.placeholder.com/350x220/DFDFDF?text=No+Image'\r\n    }\r\n  }\r\n}","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AdminProfile.vue?vue&type=style&index=0&id=c10e568a&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AdminProfile.vue?vue&type=style&index=0&id=c10e568a&scoped=true&lang=css&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ProfileForm.vue?vue&type=style&index=0&id=187a69ee&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ProfileForm.vue?vue&type=style&index=0&id=187a69ee&lang=scss&scoped=true&\"","import { apiHelper } from '../../utils/helpers'\r\n\r\nexport default {\r\n  search(name) {\r\n    const searchParams = new URLSearchParams(name)\r\n    return apiHelper.get(`/member/tag?${searchParams.toString()}`)\r\n  },\r\n  get() {\r\n    return apiHelper.get(`/member/tags`)\r\n  },\r\n}","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"box-center\",staticStyle:{\"background-color\":\"#F0E8DD\",\"height\":\"100%\"}},[_c('div',{staticClass:\"container border border-secondary\",staticStyle:{\"max-width\":\"500px\",\"border-radius\":\"5%\"}},[_c('h1',{staticClass:\"py-3 text-center\"},[_vm._v(\"會員資料\")]),_c('form',{staticClass:\"row\"},[_c('div',{staticClass:\"form-group col-12 text-center\"},[_c('button',{staticClass:\"btn btn-primary px-4 py-2\",staticStyle:{\"position\":\"absolute\",\"right\":\"0\"},attrs:{\"disabled\":_vm.initialIsProcessing},on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.edit()}}},[_vm._v(_vm._s(_vm.initialEditing ? \"取消\" : \"編輯\"))]),_c('img',{staticClass:\"user-avatar\",attrs:{\"src\":_vm._f(\"emptyImage\")(_vm.profile.avatar),\"width\":\"150\",\"height\":\"150\"}}),_c('input',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.initialEditing),expression:\"initialEditing\"}],staticClass:\"align-bottom\",attrs:{\"id\":\"image\",\"type\":\"file\",\"name\":\"image\",\"accept\":\"image/*\",\"disabled\":_vm.initialIsProcessing || !_vm.initialEditing},on:{\"change\":_vm.handleFileChange}})]),(this.$store.state.currentUser.role === \"member\")?_c('div',{staticClass:\"form-label-group mb-3 col-12\"},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.initialEditing),expression:\"initialEditing\"}]},[_c('label',[_vm._v(\"標籤\")]),_c('div',{staticClass:\"form-inline mb-2\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.tagName),expression:\"tagName\"}],staticClass:\"form-control mr-sm-2\",attrs:{\"type\":\"text\",\"name\":\"searchTag\",\"disabled\":_vm.initialIsProcessing,\"placeholder\":\"Search Tag name\"},domProps:{\"value\":(_vm.tagName)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.tagName=$event.target.value}}}),_c('button',{staticClass:\"btn btn-primary\",attrs:{\"type\":\"button\",\"disabled\":_vm.initialIsProcessing},on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.searchTag($event)}}},[_vm._v(\"搜尋\")])]),_vm._l((_vm.tagsDisplay),function(dtag){return _c('button',{key:dtag.id,staticClass:\"btn btn-primary mr-2 mt-2\",attrs:{\"disabled\":_vm.initialIsProcessing},on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.addTag(dtag)}}},[_vm._v(_vm._s(dtag.name))])})],2),_c('label',{staticClass:\"d-block\"},[_vm._v(\"偏好標籤\")]),_vm._l((_vm.profile.preferredTags),function(tag){return _c('div',{key:tag.id,staticClass:\"d-inline-block\"},[_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.initialEditing),expression:\"initialEditing\"}],staticClass:\"btn btn-primary mr-2 mb-2\",attrs:{\"disabled\":_vm.initialIsProcessing},on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.removeTag(tag)}}},[_vm._v(\"#\"+_vm._s(tag.name))]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.initialEditing),expression:\"!initialEditing\"}],staticClass:\"badge badge-danger\"},[_vm._v(_vm._s(tag.name))])])})],2):_vm._e(),_c('div',{staticClass:\"form-label-group mb-3 col-sm-6 col-12\",class:{'form-group--error': _vm.$v.profile.name.$error}},[_c('label',{attrs:{\"for\":\"name\"}},[_vm._v(\"Name\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.profile.name),expression:\"profile.name\"}],staticClass:\"form-control\",attrs:{\"disabled\":_vm.initialIsProcessing || !_vm.initialEditing,\"maxlength\":\"20\",\"minlength\":\"1\",\"id\":\"name\",\"name\":\"name\",\"type\":\"text\",\"placeholder\":\"name\",\"required\":\"\",\"autofocus\":\"\"},domProps:{\"value\":(_vm.profile.name)},on:{\"input\":[function($event){if($event.target.composing){ return; }_vm.$set(_vm.profile, \"name\", $event.target.value)},_vm.$v.profile.name.$touch]}}),(_vm.$v.profile.name.$error)?_c('small',{staticClass:\"text-danger\"},[_vm._v(\"長度介於 1 - 20\")]):_vm._e()]),_c('div',{staticClass:\"form-label-group mb-3 col-sm-6 col-12\",class:{'form-group--error': _vm.$v.profile.phone.$error}},[_c('label',{attrs:{\"for\":\"name\"}},[_vm._v(\"Phone\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.profile.phone),expression:\"profile.phone\"}],staticClass:\"form-control\",attrs:{\"disabled\":_vm.initialIsProcessing || !_vm.initialEditing,\"maxlength\":\"15\",\"minlength\":\"8\",\"id\":\"phone\",\"name\":\"phone\",\"type\":\"number\",\"placeholder\":\"phone\",\"required\":\"\",\"autofocus\":\"\"},domProps:{\"value\":(_vm.profile.phone)},on:{\"input\":[function($event){if($event.target.composing){ return; }_vm.$set(_vm.profile, \"phone\", $event.target.value)},_vm.$v.profile.phone.$touch]}}),(_vm.$v.profile.phone.$error)?_c('small',{staticClass:\"text-danger\"},[_vm._v(\"長度需為 10\")]):_vm._e()]),_c('div',{staticClass:\"form-label-group mb-3 col-sm-6 col-12\",class:{'form-group--error': _vm.$v.profile.email.$error && !_vm.$v.profile.email.$pending}},[_c('label',{attrs:{\"for\":\"email\"}},[_vm._v(\"Email\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.profile.email),expression:\"profile.email\"}],staticClass:\"form-control\",attrs:{\"disabled\":_vm.initialIsProcessing || !_vm.initialEditing,\"id\":\"email\",\"name\":\"email\",\"type\":\"email\",\"placeholder\":\"email\",\"required\":\"\",\"autofocus\":\"\"},domProps:{\"value\":(_vm.profile.email)},on:{\"input\":[function($event){if($event.target.composing){ return; }_vm.$set(_vm.profile, \"email\", $event.target.value)},_vm.$v.profile.email.$touch]}}),(!_vm.$v.profile.email && _vm.$v.profile.email.$dirty)?_c('small',{staticClass:\"text-danger\"},[_vm._v(\"請輸入格式正確的電子信箱\")]):_vm._e(),(!_vm.$v.profile.email.required && _vm.$v.profile.email.$dirty)?_c('small',{staticClass:\"text-danger\"},[_vm._v(\"電子信箱必填\")]):_vm._e()]),_c('div',{staticClass:\"form-label-group mb-3 col-sm-6 col-12\",class:{'form-group--error': _vm.$v.profile.account.$error}},[_c('label',{attrs:{\"for\":\"name\"}},[_vm._v(\"Account\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.profile.account),expression:\"profile.account\"}],staticClass:\"form-control\",attrs:{\"disabled\":_vm.initialIsProcessing || !_vm.initialEditing,\"maxlength\":\"30\",\"minlength\":\"6\",\"id\":\"account\",\"name\":\"account\",\"type\":\"text\",\"placeholder\":\"account\",\"required\":\"\"},domProps:{\"value\":(_vm.profile.account)},on:{\"input\":[function($event){if($event.target.composing){ return; }_vm.$set(_vm.profile, \"account\", $event.target.value)},_vm.$v.profile.account.$touch]}}),_c('small',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.$v.profile.account.$error),expression:\"$v.profile.account.$error\"}],staticClass:\"text-danger\"},[_vm._v(\"長度介於 5 - 30\")])]),_c('div',{staticClass:\"col-12 pb-4\"},[_c('button',{staticClass:\"btn btn-primary w-50 p-2\",attrs:{\"disabled\":_vm.initialIsProcessing},on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.$router.back()}}},[_vm._v(\"回上一頁\")]),_c('button',{staticClass:\"btn btn-primary w-50 p-2\",attrs:{\"disabled\":_vm.initialIsProcessing || _vm.$v.$invalid || !_vm.initialEditing,\"type\":\"submit\"},on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.handleSubmit($event)}}},[_vm._v(_vm._s(_vm.initialIsProcessing ? \"處理中...\" : \"送出\"))])])])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"box-center\" style=\"background-color: #F0E8DD;height: 100%;\">\r\n    <div class=\"container border border-secondary\" style=\"max-width: 500px;border-radius: 5%;\">\r\n      <h1 class=\"py-3 text-center\">會員資料</h1>\r\n      <form class=\"row\">\r\n        <div class=\"form-group col-12 text-center\">\r\n          <button\r\n            class=\"btn btn-primary px-4 py-2\"\r\n            style=\"position: absolute;right: 0;\"\r\n            :disabled=\"initialIsProcessing\"\r\n            @click.stop.prevent=\"edit()\"\r\n          >{{ initialEditing ? \"取消\" : \"編輯\" }}</button>\r\n          <img :src=\"profile.avatar | emptyImage\" class=\"user-avatar\" width=\"150\" height=\"150\" />\r\n\r\n          <input\r\n            id=\"image\"\r\n            type=\"file\"\r\n            name=\"image\"\r\n            accept=\"image/*\"\r\n            @change=\"handleFileChange\"\r\n            class=\"align-bottom\"\r\n            v-show=\"initialEditing\"\r\n            :disabled=\"initialIsProcessing || !initialEditing\"\r\n          />\r\n        </div>\r\n\r\n        <div\r\n          v-if=\"this.$store.state.currentUser.role === `member`\"\r\n          class=\"form-label-group mb-3 col-12\"\r\n        >\r\n          <div v-show=\"initialEditing\">\r\n            <label>標籤</label>\r\n            <div class=\"form-inline mb-2\">\r\n              <input\r\n                class=\"form-control mr-sm-2\"\r\n                type=\"text\"\r\n                name=\"searchTag\"\r\n                v-model=\"tagName\"\r\n                :disabled=\"initialIsProcessing\"\r\n                placeholder=\"Search Tag name\"\r\n              />\r\n              <button\r\n                type=\"button\"\r\n                class=\"btn btn-primary\"\r\n                :disabled=\"initialIsProcessing\"\r\n                @click.stop.prevent=\"searchTag\"\r\n              >搜尋</button>\r\n            </div>\r\n            <button\r\n              v-for=\"dtag in tagsDisplay\"\r\n              :key=\"dtag.id\"\r\n              class=\"btn btn-primary mr-2 mt-2\"\r\n              :disabled=\"initialIsProcessing\"\r\n              @click.stop.prevent=\"addTag(dtag)\"\r\n            >{{ dtag.name }}</button>\r\n          </div>\r\n\r\n          <label class=\"d-block\">偏好標籤</label>\r\n          <div class=\"d-inline-block\" v-for=\"tag in profile.preferredTags\" :key=\"tag.id\">\r\n            <button\r\n              v-show=\"initialEditing\"\r\n              class=\"btn btn-primary mr-2 mb-2\"\r\n              :disabled=\"initialIsProcessing\"\r\n              @click.stop.prevent=\"removeTag(tag)\"\r\n            >#{{ tag.name }}</button>\r\n            <div v-show=\"!initialEditing\" class=\"badge badge-danger\">{{tag.name}}</div>\r\n          </div>\r\n        </div>\r\n\r\n        <div\r\n          class=\"form-label-group mb-3 col-sm-6 col-12\"\r\n          :class=\"{'form-group--error': $v.profile.name.$error}\"\r\n        >\r\n          <label for=\"name\">Name</label>\r\n          <input\r\n            @input=\"$v.profile.name.$touch\"\r\n            :disabled=\"initialIsProcessing || !initialEditing\"\r\n            maxlength=\"20\"\r\n            minlength=\"1\"\r\n            id=\"name\"\r\n            v-model=\"profile.name\"\r\n            name=\"name\"\r\n            type=\"text\"\r\n            class=\"form-control\"\r\n            placeholder=\"name\"\r\n            required\r\n            autofocus\r\n          />\r\n          <small v-if=\"$v.profile.name.$error\" class=\"text-danger\">長度介於 1 - 20</small>\r\n        </div>\r\n\r\n        <div\r\n          class=\"form-label-group mb-3 col-sm-6 col-12\"\r\n          :class=\"{'form-group--error': $v.profile.phone.$error}\"\r\n        >\r\n          <label for=\"name\">Phone</label>\r\n          <input\r\n            @input=\"$v.profile.phone.$touch\"\r\n            :disabled=\"initialIsProcessing || !initialEditing\"\r\n            maxlength=\"15\"\r\n            minlength=\"8\"\r\n            id=\"phone\"\r\n            v-model=\"profile.phone\"\r\n            name=\"phone\"\r\n            type=\"number\"\r\n            class=\"form-control\"\r\n            placeholder=\"phone\"\r\n            required\r\n            autofocus\r\n          />\r\n          <small v-if=\"$v.profile.phone.$error\" class=\"text-danger\">長度需為 10</small>\r\n        </div>\r\n\r\n        <div\r\n          class=\"form-label-group mb-3 col-sm-6 col-12\"\r\n          :class=\"{'form-group--error': $v.profile.email.$error && !$v.profile.email.$pending}\"\r\n        >\r\n          <label for=\"email\">Email</label>\r\n          <input\r\n            @input=\"$v.profile.email.$touch\"\r\n            :disabled=\"initialIsProcessing || !initialEditing\"\r\n            id=\"email\"\r\n            v-model=\"profile.email\"\r\n            name=\"email\"\r\n            type=\"email\"\r\n            class=\"form-control\"\r\n            placeholder=\"email\"\r\n            required\r\n            autofocus\r\n          />\r\n          <small\r\n            v-if=\"!$v.profile.email && $v.profile.email.$dirty\"\r\n            class=\"text-danger\"\r\n          >請輸入格式正確的電子信箱</small>\r\n          <small\r\n            v-if=\"!$v.profile.email.required && $v.profile.email.$dirty\"\r\n            class=\"text-danger\"\r\n          >電子信箱必填</small>\r\n        </div>\r\n\r\n        <div\r\n          class=\"form-label-group mb-3 col-sm-6 col-12\"\r\n          :class=\"{'form-group--error': $v.profile.account.$error}\"\r\n        >\r\n          <label for=\"name\">Account</label>\r\n          <input\r\n            @input=\"$v.profile.account.$touch\"\r\n            :disabled=\"initialIsProcessing || !initialEditing\"\r\n            maxlength=\"30\"\r\n            minlength=\"6\"\r\n            id=\"account\"\r\n            v-model=\"profile.account\"\r\n            name=\"account\"\r\n            type=\"text\"\r\n            class=\"form-control\"\r\n            placeholder=\"account\"\r\n            required\r\n          />\r\n          <small v-show=\"$v.profile.account.$error\" class=\"text-danger\">長度介於 5 - 30</small>\r\n        </div>\r\n        <div class=\"col-12 pb-4\">\r\n          <button\r\n            class=\"btn btn-primary w-50 p-2\"\r\n            :disabled=\"initialIsProcessing\"\r\n            @click.stop.prevent=\"$router.back()\"\r\n          >回上一頁</button>\r\n\r\n          <button\r\n            class=\"btn btn-primary w-50 p-2\"\r\n            :disabled=\"initialIsProcessing || $v.$invalid || !initialEditing\"\r\n            type=\"submit\"\r\n            @click.stop.prevent=\"handleSubmit\"\r\n          >{{ initialIsProcessing ? \"處理中...\" : \"送出\" }}</button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport memberTagAPI from \"../../apis/member/tag\";\r\nimport { emptyImageFilter } from \"../../utils/mixins\";\r\nimport {\r\n  required,\r\n  email,\r\n  minLength,\r\n  maxLength\r\n} from \"vuelidate/lib/validators\";\r\n\r\nexport default {\r\n  name: \"ProfileForm\",\r\n  mixins: [emptyImageFilter],\r\n  props: {\r\n    initialProfile: {\r\n      type: Object,\r\n      default: () => ({\r\n        account: \"\",\r\n        phone: \"\",\r\n        name: \"\",\r\n        email: \"\",\r\n        avatar: \"\",\r\n        preferredTags: [{ id: 1, name: \"\" }]\r\n      })\r\n    },\r\n    initialTags: {\r\n      type: Array,\r\n      default: () => []\r\n    },\r\n    initialIsProcessing: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    initialEditing: {\r\n      type: Boolean,\r\n      default: false\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      profile: this.initialProfile,\r\n      tags: this.initialTags,\r\n      tagName: \"\",\r\n      tag: \"\",\r\n      searchResult: []\r\n    };\r\n  },\r\n  validations: {\r\n    profile: {\r\n      account: {\r\n        required,\r\n        minLength: minLength(5),\r\n        maxLength: maxLength(30)\r\n      },\r\n      phone: {\r\n        required,\r\n        minLength: minLength(10),\r\n        maxLength: maxLength(10)\r\n      },\r\n      name: {\r\n        required,\r\n        minLength: minLength(1),\r\n        maxLength: maxLength(20)\r\n      },\r\n      email: {\r\n        required,\r\n        email\r\n      }\r\n    }\r\n  },\r\n  watch: {\r\n    initialProfile(profile) {\r\n      this.profile = {\r\n        ...this.profile,\r\n        ...profile\r\n      };\r\n    },\r\n    initialTags(tags) {\r\n      this.tags = {\r\n        ...this.tags,\r\n        ...tags\r\n      };\r\n    }\r\n  },\r\n  computed: {\r\n    tagsDisplay: function() {\r\n      let tagBox = [...this.searchResult, ...this.initialTags];\r\n      const filtered = tagBox.filter(function({ id, name }) {\r\n        const key = `${id}${name}`;\r\n        return !this.has(key) && this.add(key);\r\n      }, new Set());\r\n      let e = filtered.slice(0, 6);\r\n      return e;\r\n    }\r\n  },\r\n  created() {},\r\n  methods: {\r\n    edit() {\r\n      this.$emit(\"after-edit\");\r\n    },\r\n    async searchTag() {\r\n      try {\r\n        const response = await memberTagAPI.search({ name: this.tagName });\r\n        const { data, statusText } = response;\r\n        if (statusText !== \"OK\") {\r\n          throw new Error(statusText);\r\n        }\r\n        if (data.length === 0) {\r\n          this.$swal({\r\n            toast: true,\r\n            position: \"top\",\r\n            showConfirmButton: false,\r\n            timer: 3000,\r\n            icon: \"warning\",\r\n            title: \"未找到相關標籤\",\r\n            text: \"\"\r\n          });\r\n        }\r\n\r\n        this.searchResult = [];\r\n\r\n        data.map(tag => {\r\n          this.searchResult.push({ id: tag.id, name: tag.name });\r\n        });\r\n      } catch (error) {\r\n        // eslint-disable-next-line\r\n        console.log(\"error\", error);\r\n      }\r\n    },\r\n    handleFileChange(e) {\r\n      const files = e.target.files;\r\n      if (!files.length) return; // 如果沒有檔案則離開此函式\r\n      // 否則產生預覽圖...\r\n      const imageURL = window.URL.createObjectURL(files[0]);\r\n      this.profile.avatar = imageURL;\r\n    },\r\n    handleSubmit() {\r\n      this.$emit(\"after-submit\");\r\n    },\r\n    addTag(tag) {\r\n      var result = this.profile.preferredTags\r\n        .map(item => {\r\n          return item.name;\r\n        })\r\n        .indexOf(tag.name);\r\n\r\n      if (result === -1) {\r\n        this.profile.preferredTags.unshift(tag);\r\n      }\r\n    },\r\n    removeTag(tag) {\r\n      this.profile.preferredTags = this.profile.preferredTags.filter(\r\n        e => e !== tag\r\n      );\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.user-avatar {\r\n  border-radius: 30%;\r\n}\r\n.box-center {\r\n  @include response(md) {\r\n    height: 100%;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n  }\r\n}\r\ninput[type=\"number\"]::-webkit-inner-spin-button,\r\ninput[type=\"number\"]::-webkit-outer-spin-button {\r\n  -webkit-appearance: none;\r\n  margin: 0;\r\n}\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ProfileForm.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ProfileForm.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ProfileForm.vue?vue&type=template&id=187a69ee&scoped=true&\"\nimport script from \"./ProfileForm.vue?vue&type=script&lang=js&\"\nexport * from \"./ProfileForm.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ProfileForm.vue?vue&type=style&index=0&id=187a69ee&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"187a69ee\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ProfileForm',{attrs:{\"initial-profile\":_vm.profile,\"initial-editing\":_vm.editing,\"initial-isLoading\":_vm.isLoading,\"initial-isProcessing\":_vm.isProcessing},on:{\"after-edit\":_vm.edit,\"after-submit\":_vm.handleSubmit}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { apiHelper } from '../../utils/helpers'\r\n\r\nexport default {\r\n  get() {\r\n    return apiHelper.get(`/admin/profile`)\r\n  },\r\n  put(formData) {\r\n    return apiHelper.put(`/admin/profile`, formData)\r\n  }\r\n}","<template>\r\n  <ProfileForm\r\n    :initial-profile=\"profile\"\r\n    :initial-editing=\"editing\"\r\n    :initial-isLoading=\"isLoading\"\r\n    :initial-isProcessing=\"isProcessing\"\r\n    @after-edit=\"edit\"\r\n    @after-submit=\"handleSubmit\"\r\n  />\r\n</template>\r\n\r\n<script>\r\nimport ProfileForm from \"../../components/Form/ProfileForm\";\r\nimport adminProfileAPI from \"../../apis/admin/profile\";\r\n\r\nexport default {\r\n  name: \"AdminProfile\",\r\n  components: {\r\n    ProfileForm\r\n  },\r\n  data() {\r\n    return {\r\n      profile: {\r\n        account: \"\",\r\n        phone: \"\",\r\n        name: \"\",\r\n        email: \"\",\r\n        avatar: \"\",\r\n        preferredTags: []\r\n      },\r\n      saveAccount: \"\",\r\n      savePhone: \"\",\r\n      saveName: \"\",\r\n      saveEmail: \"\",\r\n      saveAvatar: \"\",\r\n      savePreferredTags: [],\r\n      isLoading: true,\r\n      isProcessing: false,\r\n      editing: false\r\n    };\r\n  },\r\n  created() {\r\n    this.LoadProfile();\r\n  },\r\n  methods: {\r\n    async LoadProfile() {\r\n      try {\r\n        const response = await adminProfileAPI.get();\r\n        const { data, statusText } = response;\r\n        if (statusText !== \"OK\") {\r\n          throw new Error(statusText);\r\n        }\r\n\r\n        if (data.status === \"error\") {\r\n          this.$swal({\r\n            toast: true,\r\n            position: \"top\",\r\n            showConfirmButton: false,\r\n            timer: 3000,\r\n            icon: \"warning\",\r\n            title: \"未找到會員\",\r\n            text: \"\"\r\n          });\r\n          this.isLoading = false;\r\n        } else {\r\n          this.profile.account = data.user.account;\r\n          this.profile.phone = data.user.phone;\r\n          this.profile.name = data.user.Profile.name;\r\n          this.profile.email = data.user.Profile.email;\r\n          this.profile.avatar = data.user.Profile.avatar;\r\n\r\n          this.saveAccount = data.user.account;\r\n          this.savePhone = data.user.phone;\r\n          this.saveName = data.user.Profile.name;\r\n          this.saveEmail = data.user.Profile.email;\r\n          this.saveAvatar = data.user.Profile.avatar;\r\n          this.isLoading = false;\r\n        }\r\n      } catch (error) {\r\n        this.isLoading = false;\r\n        // eslint-disable-next-line\r\n        console.log(\"error\", error);\r\n      }\r\n    },\r\n    async handleSubmit() {\r\n      try {\r\n        this.isProcessing = true;\r\n        const response = await adminProfileAPI.put({\r\n          account: this.profile.account,\r\n          name: this.profile.name,\r\n          phone: this.profile.phone,\r\n          avatar: this.profile.avatar,\r\n          email: this.profile.email\r\n        });\r\n        const { data, statusText } = response;\r\n        if (statusText !== \"OK\") {\r\n          throw new Error(statusText);\r\n        }\r\n\r\n        this.$swal({\r\n          toast: true,\r\n          position: \"top\",\r\n          showConfirmButton: false,\r\n          timer: 3000,\r\n          icon: \"success\",\r\n          title: data.msg\r\n        });\r\n        this.isProcessing = false;\r\n      } catch (error) {\r\n        this.isProcessing = false;\r\n        this.$swal({\r\n          icon: \"warning\",\r\n          title: \"註冊失敗，請稍後再試\"\r\n        });\r\n        // eslint-disable-next-line\r\n        console.log(\"error\", error);\r\n      }\r\n    },\r\n    edit() {\r\n      if (this.editing) {\r\n        this.profile.account = this.saveAccount;\r\n        this.profile.phone = this.savePhone;\r\n        this.profile.name = this.saveName;\r\n        this.profile.email = this.saveEmail;\r\n        this.profile.avatar = this.saveAvatar;\r\n        this.editing = false;\r\n      } else {\r\n        this.editing = true;\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.user-avatar {\r\n  border-radius: 30%;\r\n}\r\n.box-center {\r\n  height: 100%;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\ninput[type=\"number\"]::-webkit-inner-spin-button,\r\ninput[type=\"number\"]::-webkit-outer-spin-button {\r\n  -webkit-appearance: none;\r\n  margin: 0;\r\n}\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AdminProfile.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AdminProfile.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AdminProfile.vue?vue&type=template&id=c10e568a&scoped=true&\"\nimport script from \"./AdminProfile.vue?vue&type=script&lang=js&\"\nexport * from \"./AdminProfile.vue?vue&type=script&lang=js&\"\nimport style0 from \"./AdminProfile.vue?vue&type=style&index=0&id=c10e568a&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"c10e568a\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}