(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d6efaee4"],{"1fe3":function(t,e,a){"use strict";a("b0c0");var i=a("2fa3");e["a"]={categories:{get:function(){return i["a"].get("/admin/categories")}},category:{get:function(t){return i["a"].get("/admin/categories/".concat(t))},post:function(t){return i["a"].post("/admin/categories",t)},put:function(t){var e=t.categoryId,a=t.name;return i["a"].put("/admin/categories/".concat(e),{name:a})},delete:function(t){return i["a"].delete("/admin/categories/".concat(t))}}}},2909:function(t,e,a){"use strict";function i(t){if(Array.isArray(t)){for(var e=0,a=new Array(t.length);e<t.length;e++)a[e]=t[e];return a}}a("a4d3"),a("e01a"),a("d28b"),a("a630"),a("e260"),a("d3b7"),a("25f0"),a("3ca3"),a("ddb0");function r(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function n(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function s(t){return i(t)||r(t)||n()}a.d(e,"a",(function(){return s}))},"4d4a":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("AdminNavbarTop",{attrs:{"initial-title":t.title}}),t.loadedCategories&&t.loadedDish?a("Spinner"):[a("AdminManageTabs"),a("div",[a("AdminManageMealTable",{attrs:{"initial-categories":t.categories,"initial-dishes":t.dishes},on:{"after-delete-dish":t.afterDeleteDish}})],1)],a("AdminNavbarBottm")],2)},r=[],n=(a("4de4"),a("2909")),s=(a("96cf"),a("1da1")),o=a("a2fe"),c=a("34f8"),d=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("ul",{staticClass:"nav nav-pills my-1"},t._l(t.categories,(function(e){return a("li",{key:e.id,staticClass:"nav-item"},[a("router-link",{staticClass:"nav-link",attrs:{to:{name:"admin-manage-meal",query:{categoryId:e.id}}}},[t._v(t._s(e.name))])],1)})),0),a("div",{staticClass:"card-columns border border-dark meal"},[this.initialDishes.length<1?a("h1",{staticClass:"warningText"},[t._v("新增一些餐點吧!")]):t._l(t.dishes,(function(e){return a("div",{key:e.id,staticClass:"card shadow-sm"},[a("div",{staticClass:"card-header d-flex justify-content-between p-0"},[a("h5",{staticClass:"pt-1"},[t._v(t._s(e.name))]),a("div",{staticClass:"dropdown dropleft"},[a("div",{attrs:{id:"dropdownMenu1","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[a("svg",{staticStyle:{width:"24px",height:"24px"},attrs:{viewBox:"0 0 24 24"}},[a("path",{attrs:{fill:"#000000",d:"M16,12A2,2 0 0,1 18,10A2,2 0 0,1 20,12A2,2 0 0,1 18,14A2,2 0 0,1 16,12M10,12A2,2 0 0,1 12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12M4,12A2,2 0 0,1 6,10A2,2 0 0,1 8,12A2,2 0 0,1 6,14A2,2 0 0,1 4,12Z"}})])]),a("div",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"dropdownMenu1"}},[a("router-link",{staticClass:"dropdown-item",attrs:{to:{name:"admin-dish-edit",params:{id:e.id}}}},[t._v("編輯")]),a("a",{staticClass:"dropdown-item",on:{click:function(a){return a.stopPropagation(),a.preventDefault(),t.handleDeleteButtonClick(e.id)}}},[t._v("刪除")])],1)])]),a("div",{staticClass:"row",staticStyle:{height:"140px"}},[a("img",{staticClass:"card-img-top col-6 px-0",attrs:{src:e.image,height:"140px",width:"220px"}}),a("div",{staticClass:"card-body col-6 p-0 px-2"},[a("p",{staticClass:"card-text overflow-hidden",staticStyle:{height:"110px"}},[t._v(t._s(e.description))]),a("p",{staticStyle:{position:"absolute",bottom:"0"}},[t._v("價格："+t._s(e.price))])])])])}))],2)])},u=[],l=(a("a4d3"),a("4160"),a("e439"),a("dbb4"),a("b64b"),a("159b"),a("ade3"));function h(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function f(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?h(Object(a),!0).forEach((function(e){Object(l["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):h(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var p={name:"AdminManageMealTable",props:{initialCategories:{type:Array},initialDishes:{type:Array}},data:function(){return{dishId:0,isProcessing:!1,categories:this.initialCategories,dishes:this.initialDishes}},methods:{handleDeleteButtonClick:function(t){this.$emit("after-delete-dish",t)}},created:function(){},watch:{initialCategories:function(t){this.categories=f({},this.categories,{},t)},initialDishes:function(t){this.dishes={},this.dishes=f({},this.dishes,{},t)}}},m=p,g=(a("c0c0"),a("2877")),v=Object(g["a"])(m,d,u,!1,null,"71cdfe3a",null),b=v.exports,y=a("9b0b"),w=a("5aa0"),A=a("cc48"),C=a("1fe3"),x=a("8055"),O=a.n(x),k={name:"AdminManageMeal",components:{AdminNavbarTop:o["a"],AdminNavbarBottm:c["a"],AdminManageMealTable:b,AdminManageTabs:y["a"],Spinner:w["a"]},data:function(){return{title:"菜單管理",categories:[],dishes:[],loadedCategories:!0,loadedDish:!0,socket:O()("https://recusplatform.herokuapp.com/")}},computed:{},created:function(){this.socket.emit("init");var t=this.$route.query.categoryId,e=void 0===t?1:t;this.fetchCategories(),this.fetchDishes({categoryId:e})},beforeRouteUpdate:function(t,e,a){var i=t.query.categoryId,r=void 0===i?1:i;this.fetchDishes({categoryId:r}),a()},methods:{fetchCategories:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e,a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,C["a"].categories.get();case 3:if(e=t.sent,a=e.data,i=e.statusText,"OK"===i){t.next=7;break}throw new Error(i);case 7:this.categories=a.categories,this.loadedCategories=!1,t.next=15;break;case 11:t.prev=11,t.t0=t["catch"](0),this.loadedCategories=!1,console.log("error",t.t0);case 15:case"end":return t.stop()}}),t,this,[[0,11]])})));function e(){return t.apply(this,arguments)}return e}(),fetchDishes:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(e){var a,i,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,A["a"].dishes.get(e);case 3:if(a=t.sent,i=a.data,r=a.statusText,"OK"===r){t.next=7;break}throw new Error(r);case 7:this.dishes=Object(n["a"])(i.dishes),this.loadedDish=!1,t.next=16;break;case 11:t.prev=11,t.t0=t["catch"](0),this.loadedDish=!1,this.$swal({icon:"warning",title:"無法取得資料，請稍後再試"}),console.log("error",t.t0);case 16:case"end":return t.stop()}}),t,this,[[0,11]])})));function e(e){return t.apply(this,arguments)}return e}(),afterDeleteDish:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(e){var a,i,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,A["a"].dish.delete(e);case 3:if(a=t.sent,i=a.data,r=a.statusText,"OK"===r&&"success"===i.status){t.next=7;break}throw new Error(r);case 7:this.dishes=this.dishes.filter((function(t){return t.id!==e})),this.$swal({icon:"success",title:i.msg}),t.next=15;break;case 11:t.prev=11,t.t0=t["catch"](0),this.$swal({icon:"warning",title:"無法取得資料，請稍後再試"}),console.log("error",t.t0);case 15:case"end":return t.stop()}}),t,this,[[0,11]])})));function e(e){return t.apply(this,arguments)}return e}()}},j=k,D=Object(g["a"])(j,i,r,!1,null,null,null);e["default"]=D.exports},"665c":function(t,e,a){},"76bd":function(t,e,a){"use strict";var i=a("acd4"),r=a.n(i);r.a},"9b0b":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ul",{staticClass:"nav nav-pills my-2 col-4"},[t._l(t.categories,(function(e){return a("li",{key:e.id,staticClass:"nav-item"},[a("router-link",{staticClass:"nav-link",attrs:{to:{name:e.routeName}}},[t._v(t._s(e.name))])],1)})),a("li",{staticClass:"nav-item"},[a("router-link",{staticClass:"nav-link",attrs:{to:{name:"admin-dish-new"}}},[t._v("新增菜單")])],1)],2)},r=[],n={name:"AdminManageTabs",data:function(){return{categories:[{id:1,name:"菜單",routeName:"admin-manage-meal"},{id:2,name:"分類",routeName:"admin-manage-categories"},{id:3,name:"標籤",routeName:"admin-manage-tages"}]}}},s=n,o=(a("76bd"),a("2877")),c=Object(o["a"])(s,i,r,!1,null,"025e03f2",null);e["a"]=c.exports},a630:function(t,e,a){var i=a("23e7"),r=a("4df4"),n=a("1c7e"),s=!n((function(t){Array.from(t)}));i({target:"Array",stat:!0,forced:s},{from:r})},acd4:function(t,e,a){},c0c0:function(t,e,a){"use strict";var i=a("665c"),r=a.n(i);r.a},cc48:function(t,e,a){"use strict";a("d3b7"),a("25f0"),a("3ca3"),a("ddb0"),a("2b3d");var i=a("2fa3");e["a"]={dishes:{get:function(t){var e=t.categoryId,a=new URLSearchParams({categoryId:e});return i["a"].get("/admin/dishes?".concat(a.toString()))}},dish:{get:function(t){return i["a"].get("/admin/dishes/".concat(t))},post:function(t){return i["a"].post("/admin/dishes",t)},put:function(t){var e=t.dishId,a=t.formData;return i["a"].put("/admin/dishes/".concat(e),a)},delete:function(t){return i["a"].delete("/admin/dishes/".concat(t))}}}},d28b:function(t,e,a){var i=a("746f");i("iterator")},e01a:function(t,e,a){"use strict";var i=a("23e7"),r=a("83ab"),n=a("da84"),s=a("5135"),o=a("861d"),c=a("9bf2").f,d=a("e893"),u=n.Symbol;if(r&&"function"==typeof u&&(!("description"in u.prototype)||void 0!==u().description)){var l={},h=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof h?new u(t):void 0===t?u():u(t);return""===t&&(l[e]=!0),e};d(h,u);var f=h.prototype=u.prototype;f.constructor=h;var p=f.toString,m="Symbol(test)"==String(u("test")),g=/^Symbol\((.*)\)[^)]+$/;c(f,"description",{configurable:!0,get:function(){var t=o(this)?this.valueOf():this,e=p.call(t);if(s(l,t))return"";var a=m?e.slice(7,-1):e.replace(g,"$1");return""===a?void 0:a}}),i({global:!0,forced:!0},{Symbol:h})}}}]);
//# sourceMappingURL=chunk-d6efaee4.64b062f2.js.map